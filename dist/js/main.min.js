"use strict";var email=document.querySelector("#email"),sendBtn=document.querySelector(".contact__form-btn"),popup=document.querySelector(".popup"),allInputs=document.querySelectorAll("input"),form=document.getElementById("form"),footerYear=document.querySelector(".footer_year"),burgerBtn=document.querySelector(".burger-btn"),navbar=document.querySelector(".navbar"),menuItems=document.querySelectorAll(".navbar__item"),scrollSpySections=document.querySelectorAll("[data-scroll='scrollspy']"),allImages=document.querySelectorAll(".zoom-img"),closeButton=document.querySelector(".close-btn"),popupBox=document.querySelector(".popup-img"),cookieBox=document.querySelector(".cookie-box"),cookieBtn=document.querySelector(".cookie-btn"),main=function(){prepareDOMEvents(),handleCurrentYear(),showCookie(),closeMenu()},prepareDOMEvents=function(){form.addEventListener("submit",function(e){e.preventDefault(),checkForm(allInputs),checkMail(email),checkErrors()}),form.addEventListener("submit",checkFormSubmission),window.addEventListener("scroll",handleScrollSpy),cookieBtn.addEventListener("click",handleCookieBBox),document.addEventListener("keyup",escapeKeyCheck),closeButton.addEventListener("click",closingPopup),popupBox.addEventListener("click",closingPopup),burgerBtn.addEventListener("click",openMenu)},handleCurrentYear=function(){var e=(new Date).getFullYear();footerYear.innerText=e},checkFormSubmission=function(e){e.preventDefault()},showError=function(e,o){var e=e.parentElement,t=e.querySelector(".error-text");e.classList.add("error"),t.textContent=o},clearError=function(e){e.parentElement.classList.remove("error")},checkForm=function(e){e.forEach(function(e){""===e.value.trim()?showError(e,"To pole nie może pozostać puste"):clearError(e)})},checkMail=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.value.trim())?(clearError(e),!1):(""===e.value.trim()?showError(e,"To pole nie może pozostać puste"):showError(e,"E-mail jest niepoprawny"),!0)},closePopup=function(){popup.classList.remove("show-popup")},checkErrors=function(){var e=document.querySelectorAll(".contact__form-box"),o=0;return e.forEach(function(e){e.classList.contains("error")&&o++}),0===o&&(popup.classList.add("show-popup"),setTimeout(closePopup,2e3)),o},openMenu=function(){document.querySelector(".navbar__list").classList.toggle("navbar__list--active")},itemcloseMenu=function(){document.querySelector(".navbar__list").classList.remove("navbar__list--active")},closeMenu=function(){var e=document.querySelector(".navbar__icon");document.querySelectorAll(".navbar__item").forEach(function(e){e.addEventListener("click",itemcloseMenu)}),e.addEventListener("click",itemcloseMenu)},handleScrollSpy=function(){var o;document.body.classList.contains("main-page")&&(o=[],scrollSpySections.forEach(function(e){window.scrollY<=e.offsetTop+e.offsetHeight-navbar.offsetHeight-1&&(o.push(e),(e=document.querySelector('[href*="'.concat(o[0].id,'"]')))?(menuItems.forEach(function(e){return e.classList.remove("active")}),e.classList.add("active")):menuItems.forEach(function(e){return e.classList.remove("active")})),window.innerHeight+window.scrollY>document.body.offsetHeight&&(e=document.querySelector(".navbar-item:last-of-type"),menuItems.forEach(function(e){return e.classList.remove("active")}),e.classList.add(".active"))}))},closingPopup=(allImages.forEach(function(o){o.addEventListener("click",function(){var e=document.querySelector(".popup-img img");popupBox.style.display="block",e.src=o.getAttribute("src"),e.alt=o.getAttribute("alt")})}),function(){popupBox.style.display="none"}),escapeKeyCheck=function(e){"Escape"===e.key&&closingPopup()},showCookie=function(){localStorage.getItem("cookie")&&cookieBox.classList.add("hide")},handleCookieBBox=function(){localStorage.setItem("cookie","true"),cookieBox.classList.add("hide")};document.addEventListener("DOMContentLoaded",main);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZW1haWwiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzZW5kQnRuIiwicG9wdXAiLCJhbGxJbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9ybSIsImdldEVsZW1lbnRCeUlkIiwiZm9vdGVyWWVhciIsImJ1cmdlckJ0biIsIm5hdmJhciIsImFsbEltYWdlcyIsImNsb3NlQnV0dG9uIiwicG9wdXBCb3giLCJjb29raWVCb3giLCJjb29raWVCdG4iLCJwcmVwYXJlRE9NRXZlbnRzIiwiaGFuZGxlQ3VycmVudFllYXIiLCJzaG93Q29va2llIiwiY2xvc2VNZW51IiwicHJldmVudERlZmF1bHQiLCJjaGVja0Zvcm0iLCJlIiwiY2hlY2tNYWlsIiwiY2hlY2tFcnJvcnMiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiY2hlY2tGb3JtU3VibWlzc2lvbiIsImhhbmRsZVNjcm9sbFNweSIsImhhbmRsZUNvb2tpZUJCb3giLCJlc2NhcGVLZXlDaGVjayIsImNsb3NpbmdQb3B1cCIsIm9wZW5NZW51IiwieWVhciIsIkRhdGUiLCJnZXRGdWxsWWVhciIsInNob3dFcnJvciIsImlucHV0IiwiZXJyb3JNc2ciLCJ0ZXh0Q29udGVudCIsIm1zZyIsImZvcm1Cb3giLCJwYXJlbnRFbGVtZW50IiwiY2xlYXJFcnJvciIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInRyaW0iLCJlbCIsImZvckVhY2giLCJ0ZXN0IiwidmFsdWUiLCJjbG9zZVBvcHVwIiwiYWxsRm9ybUJveGVzIiwiZXJyb3JDb3VudCIsImNvbnRhaW5zIiwic2V0VGltZW91dCIsIml0ZW1jbG9zZU1lbnUiLCJib2R5Iiwic2VjdGlvbnMiLCJwdXNoIiwibmF2SWNvbiIsImFjdGl2ZVNlY3Rpb24iLCJtZW51SXRlbXMiLCJsaW5rIiwiaW5uZXJIZWlnaHQiLCJzY3JvbGxZIiwibGFzdFNlY3Rpb24iLCJzY3JvbGxTcHlTZWN0aW9ucyIsIml0ZW0iLCJzZWN0aW9uIiwib2Zmc2V0VG9wIiwib2Zmc2V0SGVpZ2h0IiwiY29uY2F0IiwiaWQiLCJwb3B1cEltZyIsImRpc3BsYXkiLCJhbHQiLCJnZXRBdHRyaWJ1dGUiLCJzdHlsZSIsImxvY2FsU3RvcmFnZSIsImNvb2tpZUVhdGVuIiwic3JjIiwia2V5IiwiZ2V0SXRlbSIsInNldEl0ZW0iLCJtYWluIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUFNQSxNQUFRQyxTQUFTQyxjQUFjLFFBQVEsRUFDdkNDLFFBQVVGLFNBQVNDLGNBQWMsb0JBQW9CLEVBRHJERixNQUFRQyxTQUFTQyxjQUFjLFFBQVMsRUFDeENDLFVBQVVGLFNBQVNDLGlCQUFjLE9BQUEsRUFDakNFLEtBQVFILFNBQVNDLGVBQWMsTUFBUSxFQUN2Q0csV0FBWUosU0FBU0ssY0FBaUIsY0FBUSxFQUM5Q0MsVUFBT04sU0FBU08sY0FBcUIsYUFBQyxFQUN0Q0MsT0FBVVIsU0FBR0EsY0FBU0MsU0FBYyxFQUNwQ1EsVUFBWVQsU0FBU0MsaUJBQWMsZUFBYyxFQUNqRFMsa0JBQWtCVCxTQUFhSSxpQkFDckMsMkJBQTJCQSxFQUlyQk0sVUFBWVgsU0FBU0ssaUJBQWlCLFdBQVksRUFDbERPLFlBQWNaLFNBQVNDLGNBQWMsWUFBYSxFQUNsRFksU0FBV2IsU0FBU0MsY0FBYyxZQUFhLEVBQy9DYSxVQUFZZCxTQUFTQyxjQUFjLGFBQWMsRUFDakRjLFVBQVlmLFNBQVNDLGNBQWMsYUFBYyxFQUd0RGUsS0FBQUEsV0FBQUEsaUJBQ0FDLEVBQUFBLGtCQUNZLEVBQVpDLFdBQ1MsRUFDVEMsVUFBQSxDQUVELEVBRUlDLGlCQUFnQixXQURuQmQsS0FFQ2UsaUJBQW1CLFNBQUMsU0FBQUMsR0FEcEJBLEVBRUFDLGVBQVV4QixFQURWc0IsVUFFQUcsU0FBYSxFQURiRCxVQUVBeEIsS0FBQSxFQURBeUIsWUFFQSxDQUVELENBQ0FsQixFQUFBQSxLQUNBbUIsaUJBQU9DLFNBQWlCQyxtQkFBMEIsRUFBbERGLE9BQ0FWLGlCQUFVVyxTQUFpQkUsZUFBU0MsRUFBcENkLFVB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QUEsRUFBYWxDLFVBQU1FLE9BQUEsUUFBQSxDQUFBLENBQUEsR0FJdkNyQixPQUFBd0MsWUFBQXhDLE9BQUF5QyxRQUFBbEUsU0FBQTBELEtBQUFjLGVBckJVTCxFQUFjbkUsU0FBU0MsY0FBYywyQkFBMkIsRUF3QnpFWSxVQUFTa0UsUUFBTUgsU0FBQUEsR0FBTyxPQUFHUCxFQUFNekIsVUFBQUUsT0FBQSxRQUFBLENBQUEsQ0FBQSxFQUcxQmhCLEVBQUFBLFVBQWlCZSxJQUFqQmYsU0FBQUEsRUFyQkosQ0FBQyxFQXlCSCxFQVJNQyxjQVlOcEIsVUFBTU8sUUFBYSxTQUFBOEIsR0F0QmxCQSxFQXVCQXRCLGlCQUFvQnNELFFBQUFBLFdBRXBCLElBQUlDLEVBQWFqRixTQUFBQyxjQUFBLGdCQUFBLEVBdkJoQlksU0F3QkFDLE1BQVU4QixRQUFhLFFBQ3hCK0IsRUFBQU8sSUFBQWxDLEVBQUE4QixhQUFBLEtBQUEsRUFDQUgsRUFBQUUsSUFBQTdCLEVBQUE4QixhQUFBLEtBQUEsQ0FFRCxDQUFBLENBeEJBLENBQUMsRUFJb0IsV0FDcEJqRSxTQUFTa0UsTUFBTUgsUUFBVSxNQUMxQixHQUVNOUMsZUFBaUIsU0FBQVIsR0FDUixXQUFWQSxFQUFFNkQsS0FDTHBELGFBQVksQ0FFZCxFQUlNYixXQUFhLFdBQ0U4RCxhQUFhSSxRQUFRLFFBQVEsR0FHaER0RSxVQUFVOEIsVUFBVUMsSUFBSSxNQUFNLENBRWhDLEVBRU1oQixpQkFBbUIsV0FDeEJtRCxhQUFhSyxRQUFRLFNBQVUsTUFBTSxFQUNyQ3ZFLFVBQVU4QixVQUFVQyxJQUFJLE1BQU0sQ0FDL0IsRUFFQTdDLFNBQVMwQixpQkFBaUIsbUJBQW9CNEQsSUFBSSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGVtYWlsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VtYWlsJyk7XHJcbmNvbnN0IHNlbmRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFjdF9fZm9ybS1idG4nKTtcclxuY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAnKTtcclxuY29uc3QgYWxsSW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKTtcclxuY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtJyk7XHJcbmNvbnN0IGZvb3RlclllYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9vdGVyX3llYXInKTtcclxuY29uc3QgYnVyZ2VyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1cmdlci1idG4nKTtcclxuY29uc3QgbmF2YmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmJhcicpO1xyXG5jb25zdCBtZW51SXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2YmFyX19pdGVtJyk7XHJcbmNvbnN0IHNjcm9sbFNweVNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuXHRcIltkYXRhLXNjcm9sbD0nc2Nyb2xsc3B5J11cIlxyXG4pO1xyXG5jb25zdCBhbGxJbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuem9vbS1pbWcnKTtcclxuY29uc3QgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xvc2UtYnRuJyk7XHJcbmNvbnN0IHBvcHVwQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLWltZycpO1xyXG5jb25zdCBjb29raWVCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29va2llLWJveCcpO1xyXG5jb25zdCBjb29raWVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29va2llLWJ0bicpO1xyXG5cclxuY29uc3QgbWFpbiA9ICgpID0+IHtcclxuXHRwcmVwYXJlRE9NRXZlbnRzKCk7XHJcblx0aGFuZGxlQ3VycmVudFllYXIoKTtcclxuXHRzaG93Q29va2llKCk7XHJcblx0Y2xvc2VNZW51KCk7XHJcbn07XHJcblxyXG5jb25zdCBwcmVwYXJlRE9NRXZlbnRzID0gKCkgPT4ge1xyXG5cdGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZSA9PiB7XHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRjaGVja0Zvcm0oYWxsSW5wdXRzKTtcclxuXHRcdGNoZWNrTWFpbChlbWFpbCk7XHJcblx0XHRjaGVja0Vycm9ycygpO1xyXG5cdFx0Ly8gaWYoY2hlY2tFcnJvcnMgJiYgY2hlY2tNYWlsKXtcclxuXHRcdC8vIFx0Zm9ybS5hZGRFdmVudExpc3RlbmVyKCcnKVxyXG5cdFx0Ly8gfVxyXG5cdH0pO1xyXG5cdGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgY2hlY2tGb3JtU3VibWlzc2lvbik7XHJcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGhhbmRsZVNjcm9sbFNweSk7XHJcblx0Y29va2llQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ29va2llQkJveCk7XHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBlc2NhcGVLZXlDaGVjayk7XHJcblx0Y2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zaW5nUG9wdXApO1xyXG5cdHBvcHVwQm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2luZ1BvcHVwKTtcclxuXHRidXJnZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuTWVudSk7XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVDdXJyZW50WWVhciA9ICgpID0+IHtcclxuXHRjb25zdCB5ZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xyXG5cdGZvb3RlclllYXIuaW5uZXJUZXh0ID0geWVhcjtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrRm9ybVN1Ym1pc3Npb24gPSBlID0+IHtcclxuXHRlLnByZXZlbnREZWZhdWx0KCk7XHJcbn07XHJcblxyXG5jb25zdCBzaG93RXJyb3IgPSAoaW5wdXQsIG1zZykgPT4ge1xyXG5cdGNvbnN0IGZvcm1Cb3ggPSBpbnB1dC5wYXJlbnRFbGVtZW50O1xyXG5cdGNvbnN0IGVycm9yTXNnID0gZm9ybUJveC5xdWVyeVNlbGVjdG9yKCcuZXJyb3ItdGV4dCcpO1xyXG5cclxuXHRmb3JtQm94LmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XHJcblx0ZXJyb3JNc2cudGV4dENvbnRlbnQgPSBtc2c7XHJcbn07XHJcblxyXG5jb25zdCBjbGVhckVycm9yID0gaW5wdXQgPT4ge1xyXG5cdGNvbnN0IGZvcm1Cb3ggPSBpbnB1dC5wYXJlbnRFbGVtZW50O1xyXG5cdGZvcm1Cb3guY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrRm9ybSA9IGlucHV0ID0+IHtcclxuXHRpbnB1dC5mb3JFYWNoKGVsID0+IHtcclxuXHRcdGlmIChlbC52YWx1ZS50cmltKCkgPT09ICcnKSB7XHJcblx0XHRcdHNob3dFcnJvcihlbCwgJ1RvIHBvbGUgbmllIG1vxbxlIHBvem9zdGHEhyBwdXN0ZScpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y2xlYXJFcnJvcihlbCk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn07XHJcblxyXG5jb25zdCBjaGVja01haWwgPSBlbWFpbCA9PiB7XHJcblx0Y29uc3QgcmUgPVxyXG5cdFx0L14oKFtePD4oKVtcXF1cXFxcLiw7Olxcc0BcIl0rKFxcLltePD4oKVtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvO1xyXG5cclxuXHRpZiAocmUudGVzdChlbWFpbC52YWx1ZS50cmltKCkpKSB7XHJcblx0XHRjbGVhckVycm9yKGVtYWlsKTtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9IGVsc2UgaWYgKGVtYWlsLnZhbHVlLnRyaW0oKSA9PT0gJycpIHtcclxuXHRcdHNob3dFcnJvcihlbWFpbCwgJ1RvIHBvbGUgbmllIG1vxbxlIHBvem9zdGHEhyBwdXN0ZScpO1xyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fSBlbHNlIHtcclxuXHRcdHNob3dFcnJvcihlbWFpbCwgJ0UtbWFpbCBqZXN0IG5pZXBvcHJhd255Jyk7XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBjbG9zZVBvcHVwID0gKCkgPT4ge1xyXG5cdHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3ctcG9wdXAnKTtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrRXJyb3JzID0gKCkgPT4ge1xyXG5cdGNvbnN0IGFsbEZvcm1Cb3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb250YWN0X19mb3JtLWJveCcpO1xyXG5cdGxldCBlcnJvckNvdW50ID0gMDtcclxuXHJcblx0YWxsRm9ybUJveGVzLmZvckVhY2goZWwgPT4ge1xyXG5cdFx0aWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnZXJyb3InKSkge1xyXG5cdFx0XHRlcnJvckNvdW50Kys7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdGlmIChlcnJvckNvdW50ID09PSAwKSB7XHJcblx0XHRwb3B1cC5jbGFzc0xpc3QuYWRkKCdzaG93LXBvcHVwJyk7XHJcblx0XHRzZXRUaW1lb3V0KGNsb3NlUG9wdXAsIDIwMDApO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIGVycm9yQ291bnQ7XHJcbn07XHJcblxyXG4vLyBidXJnZXIgYnRuXHJcblxyXG5jb25zdCBvcGVuTWVudSA9ICgpID0+IHtcclxuXHRjb25zdCBuYXZMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmJhcl9fbGlzdCcpO1xyXG5cdG5hdkxpc3QuY2xhc3NMaXN0LnRvZ2dsZSgnbmF2YmFyX19saXN0LS1hY3RpdmUnKTtcclxufTtcclxuXHJcbi8vIGNsb3NlIG1lbnVcclxuXHJcbmNvbnN0IGl0ZW1jbG9zZU1lbnUgPSAoKSA9PiB7XHJcblx0Y29uc3QgbmF2TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZiYXJfX2xpc3QnKTtcclxuXHRuYXZMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ25hdmJhcl9fbGlzdC0tYWN0aXZlJyk7XHJcbn07XHJcblxyXG5jb25zdCBjbG9zZU1lbnUgPSAoKSA9PiB7XHJcblx0Y29uc3QgbmF2SWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZiYXJfX2ljb24nKTtcclxuXHRjb25zdCBuYXZJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXZiYXJfX2l0ZW0nKTtcclxuXHRuYXZJdGVtcy5mb3JFYWNoKGVsID0+IHtcclxuXHRcdGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaXRlbWNsb3NlTWVudSk7XHJcblx0fSk7XHJcblxyXG5cdG5hdkljb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpdGVtY2xvc2VNZW51KTtcclxufTtcclxuXHJcbi8vIHNjcm9sbCBzcHlcclxuXHJcbmNvbnN0IGhhbmRsZVNjcm9sbFNweSA9ICgpID0+IHtcclxuXHRpZiAoZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ21haW4tcGFnZScpKSB7XHJcblx0XHRjb25zdCBzZWN0aW9ucyA9IFtdO1xyXG5cclxuXHRcdHNjcm9sbFNweVNlY3Rpb25zLmZvckVhY2goc2VjdGlvbiA9PiB7XHJcblx0XHRcdGlmIChcclxuXHRcdFx0XHR3aW5kb3cuc2Nyb2xsWSA8PVxyXG5cdFx0XHRcdHNlY3Rpb24ub2Zmc2V0VG9wICsgc2VjdGlvbi5vZmZzZXRIZWlnaHQgLSBuYXZiYXIub2Zmc2V0SGVpZ2h0IC0gMVxyXG5cdFx0XHQpIHtcclxuXHRcdFx0XHRzZWN0aW9ucy5wdXNoKHNlY3Rpb24pO1xyXG5cclxuXHRcdFx0XHRjb25zdCBhY3RpdmVTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHRcdFx0XHRcdGBbaHJlZio9XCIke3NlY3Rpb25zWzBdLmlkfVwiXWBcclxuXHRcdFx0XHQpO1xyXG5cclxuXHRcdFx0XHRpZiAoYWN0aXZlU2VjdGlvbikge1xyXG5cdFx0XHRcdFx0bWVudUl0ZW1zLmZvckVhY2gobGluayA9PiBsaW5rLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTtcclxuXHRcdFx0XHRcdGFjdGl2ZVNlY3Rpb24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdG1lbnVJdGVtcy5mb3JFYWNoKGxpbmsgPT4gbGluay5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAod2luZG93LmlubmVySGVpZ2h0ICsgd2luZG93LnNjcm9sbFkgPiBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCkge1xyXG5cdFx0XHRcdGNvbnN0IGxhc3RTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmJhci1pdGVtOmxhc3Qtb2YtdHlwZScpO1xyXG5cclxuXHRcdFx0XHRtZW51SXRlbXMuZm9yRWFjaChpdGVtID0+IGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpO1xyXG5cclxuXHRcdFx0XHRsYXN0U2VjdGlvbi5jbGFzc0xpc3QuYWRkKCcuYWN0aXZlJyk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxufTtcclxuXHJcbi8vIHpvb20gaW1nXHJcblxyXG5hbGxJbWFnZXMuZm9yRWFjaChlbCA9PiB7XHJcblx0ZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRjb25zdCBwb3B1cEltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1pbWcgaW1nJyk7XHJcblx0XHRwb3B1cEJveC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuXHRcdHBvcHVwSW1nLnNyYyA9IGVsLmdldEF0dHJpYnV0ZSgnc3JjJyk7XHJcblx0XHRwb3B1cEltZy5hbHQgPSBlbC5nZXRBdHRyaWJ1dGUoJ2FsdCcpO1xyXG5cdH0pO1xyXG59KTtcclxuXHJcbi8vIGNsb3NlIGltZ1xyXG5cclxuY29uc3QgY2xvc2luZ1BvcHVwID0gKCkgPT4ge1xyXG5cdHBvcHVwQm94LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbn07XHJcblxyXG5jb25zdCBlc2NhcGVLZXlDaGVjayA9IGUgPT4ge1xyXG5cdGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcclxuXHRcdGNsb3NpbmdQb3B1cCgpO1xyXG5cdH1cclxufTtcclxuXHJcbi8vIGNvb2tpZXNcclxuXHJcbmNvbnN0IHNob3dDb29raWUgPSAoKSA9PiB7XHJcblx0Y29uc3QgY29va2llRWF0ZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY29va2llJyk7XHJcblxyXG5cdGlmIChjb29raWVFYXRlbikge1xyXG5cdFx0Y29va2llQm94LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVDb29raWVCQm94ID0gKCkgPT4ge1xyXG5cdGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjb29raWUnLCAndHJ1ZScpO1xyXG5cdGNvb2tpZUJveC5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7XHJcbn07XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgbWFpbik7XHJcbiJdfQ==
