"use strict";var email=document.querySelector("#email"),sendBtn=document.querySelector(".contact__form-btn"),popup=document.querySelector(".popup"),allInputs=document.querySelectorAll("input"),footerYear=document.querySelector(".footer_year"),burgerBtn=document.querySelector(".burger-btn"),navbar=document.querySelector(".navbar"),menuItems=document.querySelectorAll(".navbar__item"),scrollSpySections=document.querySelectorAll("[data-scroll='scrollspy']"),allImages=document.querySelectorAll(".zoom-img"),closeButton=document.querySelector(".close-btn"),popupBox=document.querySelector(".popup-img"),cookieBox=document.querySelector(".cookie-box"),cookieBtn=document.querySelector(".cookie-btn"),main=function(){prepareDOMEvents(),handleCurrentYear(),showCookie(),closeMenu()},prepareDOMEvents=function(){sendBtn.addEventListener("click",function(e){e.preventDefault(),checkForm(allInputs),checkMail(email),checkErrors()}),window.addEventListener("scroll",handleScrollSpy),cookieBtn.addEventListener("click",handleCookieBBox),document.addEventListener("keyup",escapeKeyCheck),closeButton.addEventListener("click",closingPopup),popupBox.addEventListener("click",closingPopup)},handleCurrentYear=function(){var e=(new Date).getFullYear();footerYear.innerText=e},showError=function(e,o){var e=e.parentElement,t=e.querySelector(".error-text");e.classList.add("error"),t.textContent=o},clearError=function(e){e.parentElement.classList.remove("error")},checkForm=function(e){e.forEach(function(e){""===e.value?showError(e,"Uzupe≈Çnij pole *"):clearError(e)})},checkMail=function(e){/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.value)?clearError(e):showError(e,"E-mail jest niepoprawny")},closePopup=function(){popup.classList.remove("show-popup")},checkErrors=function(){var e=document.querySelectorAll(".contact__form-box"),o=0;e.forEach(function(e){e.classList.contains("error")&&o++}),0===o&&(popup.classList.add("show-popup"),setTimeout(closePopup,2e3))},openMenu=function(){document.querySelector(".navbar__list").classList.toggle("navbar__list--active")},itemcloseMenu=function(){document.querySelector(".navbar__list").classList.remove("navbar__list--active")},closeMenu=function(){var e=document.querySelector(".navbar__icon");document.querySelectorAll(".navbar__item").forEach(function(e){e.addEventListener("click",itemcloseMenu)}),e.addEventListener("click",itemcloseMenu)},handleScrollSpy=function(){var o;document.body.classList.contains("main-page")&&(o=[],scrollSpySections.forEach(function(e){window.scrollY<=e.offsetTop+e.offsetHeight-navbar.offsetHeight-1&&(o.push(e),(e=document.querySelector('[href*="'.concat(o[0].id,'"]')))?(menuItems.forEach(function(e){return e.classList.remove("active")}),e.classList.add("active")):menuItems.forEach(function(e){return e.classList.remove("active")})),window.innerHeight+window.scrollY>document.body.offsetHeight&&(e=document.querySelector(".navbar-item:last-of-type"),menuItems.forEach(function(e){return e.classList.remove("active")}),e.classList.add(".active"))}))},closingPopup=(allImages.forEach(function(o){o.addEventListener("click",function(){var e=document.querySelector(".popup-img img");popupBox.style.display="block",e.src=o.getAttribute("src"),e.alt=o.getAttribute("alt")})}),function(){popupBox.style.display="none"}),escapeKeyCheck=function(e){"Escape"===e.key&&closingPopup()},showCookie=function(){localStorage.getItem("cookie")&&cookieBox.classList.add("hide")},handleCookieBBox=function(){localStorage.setItem("cookie","true"),cookieBox.classList.add("hide")};document.addEventListener("DOMContentLoaded",main);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZW1haWwiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzZW5kQnRuIiwicG9wdXAiLCJhbGxJbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9vdGVyWWVhciIsImJ1cmdlckJ0biIsIm5hdmJhciIsImFsbEltYWdlcyIsImNsb3NlQnV0dG9uIiwicG9wdXBCb3giLCJjb29raWVCb3giLCJjb29raWVCdG4iLCJwcmVwYXJlRE9NRXZlbnRzIiwiaGFuZGxlQ3VycmVudFllYXIiLCJzaG93Q29va2llIiwiY2xvc2VNZW51IiwicHJldmVudERlZmF1bHQiLCJjaGVja0Zvcm0iLCJlIiwiY2hlY2tNYWlsIiwiY2hlY2tFcnJvcnMiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlU2Nyb2xsU3B5IiwiZXNjYXBlS2V5Q2hlY2siLCJoYW5kbGVDb29raWVCQm94IiwiY2xvc2luZ1BvcHVwIiwic2hvd0Vycm9yIiwiRGF0ZSIsImlucHV0IiwiZm9ybUJveCIsInBhcmVudEVsZW1lbnQiLCJlcnJvck1zZyIsInRleHRDb250ZW50IiwibXNnIiwiY2xlYXJFcnJvciIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImVsIiwiZm9yRWFjaCIsImNsb3NlUG9wdXAiLCJhbGxGb3JtQm94ZXMiLCJ2YWx1ZSIsImVycm9yQ291bnQiLCJuYXZMaXN0IiwiaXRlbWNsb3NlTWVudSIsInNldFRpbWVvdXQiLCJuYXZJdGVtcyIsInRvZ2dsZSIsInNjcm9sbFkiLCJuYXZJY29uIiwicHVzaCIsInNlY3Rpb24iLCJhY3RpdmVTZWN0aW9uIiwic2VjdGlvbnMiLCJib2R5IiwiY29udGFpbnMiLCJpbm5lckhlaWdodCIsInNjcm9sbFNweVNlY3Rpb25zIiwibGFzdFNlY3Rpb24iLCJvZmZzZXRIZWlnaHQiLCJjb25jYXQiLCJpZCIsImxpbmsiLCJwb3B1cEltZyIsInNyYyIsImdldEF0dHJpYnV0ZSIsIml0ZW0iLCJjb29raWVFYXRlbiIsImxvY2FsU3RvcmFnZSIsImRpc3BsYXkiLCJhbHQiLCJzdHlsZSIsImtleSIsImdldEl0ZW0iLCJzZXRJdGVtIiwibWFpbiJdLCJtYXBwaW5ncyI6ImFBQUEsSUFBTUEsTUFBUUMsU0FBU0MsY0FBYyxRQUFRLEVBQ3ZDQyxRQUFVRixTQUFTQyxjQUFjLG9CQUFvQixFQURyREYsTUFBUUMsU0FBU0MsY0FBYyxRQUFTLEVBQ3hDQyxVQUFVRixTQUFTQyxpQkFBYyxPQUFBLEVBQ2pDRSxXQUFRSCxTQUFTQyxjQUFjLGNBQVMsRUFDeENHLFVBQVlKLFNBQVNLLGNBQWdCLGFBQVMsRUFDOUNDLE9BQVVOLFNBQUdBLGNBQVNDLFNBQWMsRUFDcENNLFVBQVlQLFNBQVNDLGlCQUFjLGVBQWMsRUFDakRPLGtCQUFrQlAsU0FBYUksaUJBQ3JDLDJCQUEyQkEsRUFJckJJLFVBQVlULFNBQVNLLGlCQUFpQixXQUFZLEVBQ2xESyxZQUFjVixTQUFTQyxjQUFjLFlBQWEsRUFDbERVLFNBQVdYLFNBQVNDLGNBQWMsWUFBYSxFQUMvQ1csVUFBWVosU0FBU0MsY0FBYyxhQUFjLEVBQ2pEWSxVQUFZYixTQUFTQyxjQUFjLGFBQWMsRUFHdERhLEtBQUFBLFdBQUFBLGlCQUNBQyxFQUFBQSxrQkFDWSxFQUFaQyxXQUNTLEVBQ1RDLFVBQUEsQ0FFRCxFQUVJQyxpQkFBZ0IsV0FEbkJoQixRQUVDaUIsaUJBQW9CLFFBQUEsU0FBQUMsR0FEcEJBLEVBRUFDLGVBQVV0QixFQURWb0IsVUFFQUcsU0FBYSxFQUNkRCxVQUFFdEIsS0FBQSxFQUNGd0IsWUFBT0MsQ0FEUCxDQUVBWCxFQURBVSxPQUVBdkIsaUJBQVN3QixTQUF3QkMsZUFBRUMsRUFEbkNiLFVBRUFILGlCQUFZYyxRQUFpQkcsZ0JBQXNCLEVBRG5EM0IsU0FFUXdCLGlCQUFpQixRQUFRRSxjQUFlLEVBQ2hEaEIsWUFBQWMsaUJBQUEsUUFBQUksWUFBQSxFQUVEakIsU0FBTUksaUJBQW9CLFFBQXBCQSxZQUFBQSxDQUZOLEVBS0NBLGtCQUFBLFdBRUQsSUFB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LE1BQVdFLFFBQUUsUUF0QmhCTixFQXVCQXZELElBQVUwQixFQUFBQSxhQUFjLEtBQU8sRUFDaEM2QixFQUFBTyxJQUFBakMsRUFBQTRCLGFBQUEsS0FBQSxDQUNBLENBQUEsQ0FFRCxDQUFBLEVBS1M3QyxXQXhCUmIsU0FBU2dFLE1BQU1GLFFBQVUsTUFDMUIsR0FFTS9DLGVBQWlCLFNBQUFOLEdBQ1IsV0FBVkEsRUFBRXdELEtBQ0xoRCxhQUFZLENBRWQsRUFJTVosV0FBYSxXQUNFd0QsYUFBYUssUUFBUSxRQUFRLEdBR2hEakUsVUFBVTBCLFVBQVVDLElBQUksTUFBTSxDQUVoQyxFQUVNWixpQkFBbUIsV0FDeEI2QyxhQUFhTSxRQUFRLFNBQVUsTUFBTSxFQUNyQ2xFLFVBQVUwQixVQUFVQyxJQUFJLE1BQU0sQ0FDL0IsRUFFQXZDLFNBQVN3QixpQkFBaUIsbUJBQW9CdUQsSUFBSSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGVtYWlsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VtYWlsJyk7XHJcbmNvbnN0IHNlbmRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFjdF9fZm9ybS1idG4nKTtcclxuY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAnKTtcclxuY29uc3QgYWxsSW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKTtcclxuY29uc3QgZm9vdGVyWWVhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb290ZXJfeWVhcicpO1xyXG5jb25zdCBidXJnZXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVyZ2VyLWJ0bicpO1xyXG5jb25zdCBuYXZiYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2YmFyJyk7XHJcbmNvbnN0IG1lbnVJdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXZiYXJfX2l0ZW0nKTtcclxuY29uc3Qgc2Nyb2xsU3B5U2VjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxyXG5cdFwiW2RhdGEtc2Nyb2xsPSdzY3JvbGxzcHknXVwiXHJcbik7XHJcbmNvbnN0IGFsbEltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy56b29tLWltZycpO1xyXG5jb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jbG9zZS1idG4nKTtcclxuY29uc3QgcG9wdXBCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtaW1nJyk7XHJcbmNvbnN0IGNvb2tpZUJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb29raWUtYm94Jyk7XHJcbmNvbnN0IGNvb2tpZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb29raWUtYnRuJyk7XHJcblxyXG5jb25zdCBtYWluID0gKCkgPT4ge1xyXG5cdHByZXBhcmVET01FdmVudHMoKTtcclxuXHRoYW5kbGVDdXJyZW50WWVhcigpO1xyXG5cdHNob3dDb29raWUoKTtcclxuXHRjbG9zZU1lbnUoKTtcclxufTtcclxuXHJcbmNvbnN0IHByZXBhcmVET01FdmVudHMgPSAoKSA9PiB7XHJcblx0c2VuZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0Y2hlY2tGb3JtKGFsbElucHV0cyk7XHJcblx0XHRjaGVja01haWwoZW1haWwpO1xyXG5cdFx0Y2hlY2tFcnJvcnMoKTtcclxuXHR9KTtcclxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgaGFuZGxlU2Nyb2xsU3B5KTtcclxuXHRjb29raWVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDb29raWVCQm94KTtcclxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGVzY2FwZUtleUNoZWNrKTtcclxuXHRjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NpbmdQb3B1cCk7XHJcblx0cG9wdXBCb3guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zaW5nUG9wdXApO1xyXG59O1xyXG5cclxuY29uc3QgaGFuZGxlQ3VycmVudFllYXIgPSAoKSA9PiB7XHJcblx0Y29uc3QgeWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtcclxuXHRmb290ZXJZZWFyLmlubmVyVGV4dCA9IHllYXI7XHJcbn07XHJcblxyXG5jb25zdCBzaG93RXJyb3IgPSAoaW5wdXQsIG1zZykgPT4ge1xyXG5cdGNvbnN0IGZvcm1Cb3ggPSBpbnB1dC5wYXJlbnRFbGVtZW50O1xyXG5cdGNvbnN0IGVycm9yTXNnID0gZm9ybUJveC5xdWVyeVNlbGVjdG9yKCcuZXJyb3ItdGV4dCcpO1xyXG5cclxuXHRmb3JtQm94LmNsYXNzTGlzdC5hZGQoJ2Vycm9yJyk7XHJcblx0ZXJyb3JNc2cudGV4dENvbnRlbnQgPSBtc2c7XHJcbn07XHJcblxyXG5jb25zdCBjbGVhckVycm9yID0gaW5wdXQgPT4ge1xyXG5cdGNvbnN0IGZvcm1Cb3ggPSBpbnB1dC5wYXJlbnRFbGVtZW50O1xyXG5cdGZvcm1Cb3guY2xhc3NMaXN0LnJlbW92ZSgnZXJyb3InKTtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrRm9ybSA9IGlucHV0ID0+IHtcclxuXHRpbnB1dC5mb3JFYWNoKGVsID0+IHtcclxuXHRcdGlmIChlbC52YWx1ZSA9PT0gJycpIHtcclxuXHRcdFx0c2hvd0Vycm9yKGVsLCAnVXp1cGXFgm5paiBwb2xlIConKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNsZWFyRXJyb3IoZWwpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59O1xyXG5cclxuY29uc3QgY2hlY2tNYWlsID0gZW1haWwgPT4ge1xyXG5cdGNvbnN0IHJlID1cclxuXHRcdC9eKChbXjw+KClbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFxdKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLztcclxuXHJcblx0aWYgKHJlLnRlc3QoZW1haWwudmFsdWUpKSB7XHJcblx0XHRjbGVhckVycm9yKGVtYWlsKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0c2hvd0Vycm9yKGVtYWlsLCAnRS1tYWlsIGplc3QgbmllcG9wcmF3bnknKTtcclxuXHR9XHJcbn07XHJcblxyXG5jb25zdCBjbG9zZVBvcHVwID0gKCkgPT4ge1xyXG5cdHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3ctcG9wdXAnKTtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrRXJyb3JzID0gKCkgPT4ge1xyXG5cdGNvbnN0IGFsbEZvcm1Cb3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb250YWN0X19mb3JtLWJveCcpO1xyXG5cdGxldCBlcnJvckNvdW50ID0gMDtcclxuXHJcblx0YWxsRm9ybUJveGVzLmZvckVhY2goZWwgPT4ge1xyXG5cdFx0aWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnZXJyb3InKSkge1xyXG5cdFx0XHRlcnJvckNvdW50Kys7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdGlmIChlcnJvckNvdW50ID09PSAwKSB7XHJcblx0XHRwb3B1cC5jbGFzc0xpc3QuYWRkKCdzaG93LXBvcHVwJyk7XHJcblx0XHRzZXRUaW1lb3V0KGNsb3NlUG9wdXAsIDIwMDApO1xyXG5cdH1cclxufTtcclxuXHJcbi8vIGJ1cmdlciBidG5cclxuXHJcbmNvbnN0IG9wZW5NZW51ID0gKCkgPT4ge1xyXG5cdGNvbnN0IG5hdkxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2YmFyX19saXN0Jyk7XHJcblx0bmF2TGlzdC5jbGFzc0xpc3QudG9nZ2xlKCduYXZiYXJfX2xpc3QtLWFjdGl2ZScpO1xyXG59O1xyXG5cclxuLy8gY2xvc2UgbWVudVxyXG5cclxuY29uc3QgaXRlbWNsb3NlTWVudSA9ICgpID0+IHtcclxuXHRjb25zdCBuYXZMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmJhcl9fbGlzdCcpO1xyXG5cdG5hdkxpc3QuY2xhc3NMaXN0LnJlbW92ZSgnbmF2YmFyX19saXN0LS1hY3RpdmUnKTtcclxufTtcclxuXHJcbmNvbnN0IGNsb3NlTWVudSA9ICgpID0+IHtcclxuXHRjb25zdCBuYXZJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmJhcl9faWNvbicpO1xyXG5cdGNvbnN0IG5hdkl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5hdmJhcl9faXRlbScpO1xyXG5cdG5hdkl0ZW1zLmZvckVhY2goZWwgPT4ge1xyXG5cdFx0ZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpdGVtY2xvc2VNZW51KTtcclxuXHR9KTtcclxuXHJcblx0bmF2SWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGl0ZW1jbG9zZU1lbnUpO1xyXG59O1xyXG5cclxuLy8gc2Nyb2xsIHNweVxyXG5cclxuY29uc3QgaGFuZGxlU2Nyb2xsU3B5ID0gKCkgPT4ge1xyXG5cdGlmIChkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnbWFpbi1wYWdlJykpIHtcclxuXHRcdGNvbnN0IHNlY3Rpb25zID0gW107XHJcblxyXG5cdFx0c2Nyb2xsU3B5U2VjdGlvbnMuZm9yRWFjaChzZWN0aW9uID0+IHtcclxuXHRcdFx0aWYgKFxyXG5cdFx0XHRcdHdpbmRvdy5zY3JvbGxZIDw9XHJcblx0XHRcdFx0c2VjdGlvbi5vZmZzZXRUb3AgKyBzZWN0aW9uLm9mZnNldEhlaWdodCAtIG5hdmJhci5vZmZzZXRIZWlnaHQgLSAxXHJcblx0XHRcdCkge1xyXG5cdFx0XHRcdHNlY3Rpb25zLnB1c2goc2VjdGlvbik7XHJcblxyXG5cdFx0XHRcdGNvbnN0IGFjdGl2ZVNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG5cdFx0XHRcdFx0YFtocmVmKj1cIiR7c2VjdGlvbnNbMF0uaWR9XCJdYFxyXG5cdFx0XHRcdCk7XHJcblxyXG5cdFx0XHRcdGlmIChhY3RpdmVTZWN0aW9uKSB7XHJcblx0XHRcdFx0XHRtZW51SXRlbXMuZm9yRWFjaChsaW5rID0+IGxpbmsuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpO1xyXG5cdFx0XHRcdFx0YWN0aXZlU2VjdGlvbi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0bWVudUl0ZW1zLmZvckVhY2gobGluayA9PiBsaW5rLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgKyB3aW5kb3cuc2Nyb2xsWSA+IGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0KSB7XHJcblx0XHRcdFx0Y29uc3QgbGFzdFNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2YmFyLWl0ZW06bGFzdC1vZi10eXBlJyk7XHJcblxyXG5cdFx0XHRcdG1lbnVJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7XHJcblxyXG5cdFx0XHRcdGxhc3RTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJy5hY3RpdmUnKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG59O1xyXG5cclxuLy8gem9vbSBpbWdcclxuXHJcbmFsbEltYWdlcy5mb3JFYWNoKGVsID0+IHtcclxuXHRlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdGNvbnN0IHBvcHVwSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLWltZyBpbWcnKTtcclxuXHRcdHBvcHVwQm94LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG5cdFx0cG9wdXBJbWcuc3JjID0gZWwuZ2V0QXR0cmlidXRlKCdzcmMnKTtcclxuXHRcdHBvcHVwSW1nLmFsdCA9IGVsLmdldEF0dHJpYnV0ZSgnYWx0Jyk7XHJcblx0fSk7XHJcbn0pO1xyXG5cclxuLy8gY2xvc2UgaW1nXHJcblxyXG5jb25zdCBjbG9zaW5nUG9wdXAgPSAoKSA9PiB7XHJcblx0cG9wdXBCb3guc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxufTtcclxuXHJcbmNvbnN0IGVzY2FwZUtleUNoZWNrID0gZSA9PiB7XHJcblx0aWYgKGUua2V5ID09PSAnRXNjYXBlJykge1xyXG5cdFx0Y2xvc2luZ1BvcHVwKCk7XHJcblx0fVxyXG59O1xyXG5cclxuLy8gY29va2llc1xyXG5cclxuY29uc3Qgc2hvd0Nvb2tpZSA9ICgpID0+IHtcclxuXHRjb25zdCBjb29raWVFYXRlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjb29raWUnKTtcclxuXHJcblx0aWYgKGNvb2tpZUVhdGVuKSB7XHJcblx0XHRjb29raWVCb3guY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IGhhbmRsZUNvb2tpZUJCb3ggPSAoKSA9PiB7XHJcblx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Nvb2tpZScsICd0cnVlJyk7XHJcblx0Y29va2llQm94LmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcclxufTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBtYWluKTtcclxuIl19
