"use strict";var email=document.querySelector("#email"),sendBtn=document.querySelector(".contact__form-btn"),popup=document.querySelector(".popup"),allInputs=document.querySelectorAll("input"),footerYear=document.querySelector(".footer_year"),burgerBtn=document.querySelector(".burger-btn"),navbar=document.querySelector(".navbar"),menuItems=document.querySelectorAll(".navbar__item"),scrollSpySections=document.querySelectorAll("[data-scroll='scrollspy']"),allImages=document.querySelectorAll(".zoom-img"),closeButton=document.querySelector(".close-btn"),popupBox=document.querySelector(".popup-img"),cookieBox=document.querySelector(".cookie-box"),cookieBtn=document.querySelector(".cookie-btn"),main=function(){prepareDOMEvents(),handleCurrentYear(),showCookie(),closeMenu()},prepareDOMEvents=function(){sendBtn.addEventListener("click",function(e){e.preventDefault(),checkForm(allInputs),checkMail(email),checkErrors()}),window.addEventListener("scroll",handleScrollSpy),cookieBtn.addEventListener("click",handleCookieBBox),document.addEventListener("keyup",escapeKeyCheck),closeButton.addEventListener("click",closingPopup),popupBox.addEventListener("click",closingPopup),burgerBtn.addEventListener("click",openMenu)},handleCurrentYear=function(){var e=(new Date).getFullYear();footerYear.innerText=e},showError=function(e,o){var e=e.parentElement,t=e.querySelector(".error-text");e.classList.add("error"),t.textContent=o},clearError=function(e){e.parentElement.classList.remove("error")},checkForm=function(e){e.forEach(function(e){""===e.value?showError(e,"Uzupe≈Çnij pole *"):clearError(e)})},checkMail=function(e){/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.value)?clearError(e):showError(e,"E-mail jest niepoprawny")},closePopup=function(){popup.classList.remove("show-popup")},checkErrors=function(){var e=document.querySelectorAll(".contact__form-box"),o=0;e.forEach(function(e){e.classList.contains("error")&&o++}),0===o&&(popup.classList.add("show-popup"),setTimeout(closePopup,2e3))},openMenu=function(){document.querySelector(".navbar__list").classList.toggle("navbar__list--active")},itemcloseMenu=function(){document.querySelector(".navbar__list").classList.remove("navbar__list--active")},closeMenu=function(){var e=document.querySelector(".navbar__icon");document.querySelectorAll(".navbar__item").forEach(function(e){e.addEventListener("click",itemcloseMenu)}),e.addEventListener("click",itemcloseMenu)},handleScrollSpy=function(){var o;document.body.classList.contains("main-page")&&(o=[],scrollSpySections.forEach(function(e){window.scrollY<=e.offsetTop+e.offsetHeight-navbar.offsetHeight-1&&(o.push(e),(e=document.querySelector('[href*="'.concat(o[0].id,'"]')))?(menuItems.forEach(function(e){return e.classList.remove("active")}),e.classList.add("active")):menuItems.forEach(function(e){return e.classList.remove("active")})),window.innerHeight+window.scrollY>document.body.offsetHeight&&(e=document.querySelector(".navbar-item:last-of-type"),menuItems.forEach(function(e){return e.classList.remove("active")}),e.classList.add(".active"))}))},closingPopup=(allImages.forEach(function(o){o.addEventListener("click",function(){var e=document.querySelector(".popup-img img");popupBox.style.display="block",e.src=o.getAttribute("src"),e.alt=o.getAttribute("alt")})}),function(){popupBox.style.display="none"}),escapeKeyCheck=function(e){"Escape"===e.key&&closingPopup()},showCookie=function(){localStorage.getItem("cookie")&&cookieBox.classList.add("hide")},handleCookieBBox=function(){localStorage.setItem("cookie","true"),cookieBox.classList.add("hide")};document.addEventListener("DOMContentLoaded",main);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZW1haWwiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzZW5kQnRuIiwicG9wdXAiLCJhbGxJbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9vdGVyWWVhciIsImJ1cmdlckJ0biIsIm5hdmJhciIsImFsbEltYWdlcyIsImNsb3NlQnV0dG9uIiwicG9wdXBCb3giLCJjb29raWVCb3giLCJjb29raWVCdG4iLCJwcmVwYXJlRE9NRXZlbnRzIiwiaGFuZGxlQ3VycmVudFllYXIiLCJzaG93Q29va2llIiwiY2xvc2VNZW51IiwicHJldmVudERlZmF1bHQiLCJjaGVja0Zvcm0iLCJlIiwiY2hlY2tNYWlsIiwiY2hlY2tFcnJvcnMiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlU2Nyb2xsU3B5IiwiZXNjYXBlS2V5Q2hlY2siLCJoYW5kbGVDb29raWVCQm94Iiwib3Blbk1lbnUiLCJjbG9zaW5nUG9wdXAiLCJzaG93RXJyb3IiLCJEYXRlIiwiaW5wdXQiLCJmb3JtQm94IiwicGFyZW50RWxlbWVudCIsImVycm9yTXNnIiwidGV4dENvbnRlbnQiLCJtc2ciLCJjbGVhckVycm9yIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiZWwiLCJmb3JFYWNoIiwiY2xvc2VQb3B1cCIsImFsbEZvcm1Cb3hlcyIsInZhbHVlIiwiZXJyb3JDb3VudCIsIm5hdkxpc3QiLCJpdGVtY2xvc2VNZW51Iiwic2V0VGltZW91dCIsIm5hdkl0ZW1zIiwidG9nZ2xlIiwic2Nyb2xsWSIsIm5hdkljb24iLCJwdXNoIiwic2VjdGlvbiIsImFjdGl2ZVNlY3Rpb24iLCJzZWN0aW9ucyIsImJvZHkiLCJjb250YWlucyIsImlubmVySGVpZ2h0Iiwic2Nyb2xsU3B5U2VjdGlvbnMiLCJsYXN0U2VjdGlvbiIsIm9mZnNldEhlaWdodCIsImNvbmNhdCIsImlkIiwibGluayIsInBvcHVwSW1nIiwic3JjIiwiZ2V0QXR0cmlidXRlIiwiaXRlbSIsImNvb2tpZUVhdGVuIiwibG9jYWxTdG9yYWdlIiwiZGlzcGxheSIsImFsdCIsInN0eWxlIiwia2V5IiwiZ2V0SXRlbSIsInNldEl0ZW0iLCJtYWluIl0sIm1hcHBpbmdzIjoiYUFBQSxJQUFNQSxNQUFRQyxTQUFTQyxjQUFjLFFBQVEsRUFDdkNDLFFBQVVGLFNBQVNDLGNBQWMsb0JBQW9CLEVBRHJERixNQUFRQyxTQUFTQyxjQUFjLFFBQVMsRUFDeENDLFVBQVVGLFNBQVNDLGlCQUFjLE9BQUEsRUFDakNFLFdBQVFILFNBQVNDLGNBQWMsY0FBUyxFQUN4Q0csVUFBWUosU0FBU0ssY0FBZ0IsYUFBUyxFQUM5Q0MsT0FBVU4sU0FBR0EsY0FBU0MsU0FBYyxFQUNwQ00sVUFBWVAsU0FBU0MsaUJBQWMsZUFBYyxFQUNqRE8sa0JBQWtCUCxTQUFhSSxpQkFDckMsMkJBQTJCQSxFQUlyQkksVUFBWVQsU0FBU0ssaUJBQWlCLFdBQVksRUFDbERLLFlBQWNWLFNBQVNDLGNBQWMsWUFBYSxFQUNsRFUsU0FBV1gsU0FBU0MsY0FBYyxZQUFhLEVBQy9DVyxVQUFZWixTQUFTQyxjQUFjLGFBQWMsRUFDakRZLFVBQVliLFNBQVNDLGNBQWMsYUFBYyxFQUd0RGEsS0FBQUEsV0FBQUEsaUJBQ0FDLEVBQUFBLGtCQUNZLEVBQVpDLFdBQ1MsRUFDVEMsVUFBQSxDQUVELEVBRUlDLGlCQUFnQixXQURuQmhCLFFBRUNpQixpQkFBb0IsUUFBQSxTQUFBQyxHQURwQkEsRUFFQUMsZUFBVXRCLEVBRFZvQixVQUVBRyxTQUFhLEVBQ2RELFVBQUV0QixLQUFBLEVBQ0Z3QixZQUFPQyxDQURQLENBRUFYLEVBREFVLE9BRUF2QixpQkFBU3dCLFNBQXdCQyxlQUFFQyxFQURuQ2IsVUFFQUgsaUJBQVljLFFBQWlCRyxnQkFBc0IsRUFEbkQzQixTQUVRd0IsaUJBQWlCLFFBQVFFLGNBQWUsRUFEaERoQixZQUVVYyxpQkFBaUIsUUFBU0ksWUFBUyxFQUM3Q2pCLFNBQUFhLGlCQUFBLFFBQUFLLFlBQUEsRUFFRHRCLFVBQU1RLGlC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d0QsRUFBV3hFLFNBQUd5RSxjQUFxQixnQkFBUyxFQUVsRDlELFNBQUk2RCxNQUFXRSxRQUFFLFFBdEJoQk4sRUF1QkF4RCxJQUFVMkIsRUFBQUEsYUFBYyxLQUFPLEVBQ2hDNkIsRUFBQU8sSUFBQWpDLEVBQUE0QixhQUFBLEtBQUEsQ0FDQSxDQUFBLENBRUQsQ0FBQSxFQUtTOUMsV0F4QlJiLFNBQVNpRSxNQUFNRixRQUFVLE1BQzFCLEdBRU1oRCxlQUFpQixTQUFBTixHQUNSLFdBQVZBLEVBQUV5RCxLQUNMaEQsYUFBWSxDQUVkLEVBSU1iLFdBQWEsV0FDRXlELGFBQWFLLFFBQVEsUUFBUSxHQUdoRGxFLFVBQVUyQixVQUFVQyxJQUFJLE1BQU0sQ0FFaEMsRUFFTWIsaUJBQW1CLFdBQ3hCOEMsYUFBYU0sUUFBUSxTQUFVLE1BQU0sRUFDckNuRSxVQUFVMkIsVUFBVUMsSUFBSSxNQUFNLENBQy9CLEVBRUF4QyxTQUFTd0IsaUJBQWlCLG1CQUFvQndELElBQUkiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBlbWFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlbWFpbCcpO1xyXG5jb25zdCBzZW5kQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhY3RfX2Zvcm0tYnRuJyk7XHJcbmNvbnN0IHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwJyk7XHJcbmNvbnN0IGFsbElucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0Jyk7XHJcbmNvbnN0IGZvb3RlclllYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9vdGVyX3llYXInKTtcclxuY29uc3QgYnVyZ2VyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1cmdlci1idG4nKTtcclxuY29uc3QgbmF2YmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5hdmJhcicpO1xyXG5jb25zdCBtZW51SXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2YmFyX19pdGVtJyk7XHJcbmNvbnN0IHNjcm9sbFNweVNlY3Rpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcclxuXHRcIltkYXRhLXNjcm9sbD0nc2Nyb2xsc3B5J11cIlxyXG4pO1xyXG5jb25zdCBhbGxJbWFnZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuem9vbS1pbWcnKTtcclxuY29uc3QgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xvc2UtYnRuJyk7XHJcbmNvbnN0IHBvcHVwQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLWltZycpO1xyXG5jb25zdCBjb29raWVCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29va2llLWJveCcpO1xyXG5jb25zdCBjb29raWVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29va2llLWJ0bicpO1xyXG5cclxuY29uc3QgbWFpbiA9ICgpID0+IHtcclxuXHRwcmVwYXJlRE9NRXZlbnRzKCk7XHJcblx0aGFuZGxlQ3VycmVudFllYXIoKTtcclxuXHRzaG93Q29va2llKCk7XHJcblx0Y2xvc2VNZW51KCk7XHJcbn07XHJcblxyXG5jb25zdCBwcmVwYXJlRE9NRXZlbnRzID0gKCkgPT4ge1xyXG5cdHNlbmRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdGNoZWNrRm9ybShhbGxJbnB1dHMpO1xyXG5cdFx0Y2hlY2tNYWlsKGVtYWlsKTtcclxuXHRcdGNoZWNrRXJyb3JzKCk7XHJcblx0fSk7XHJcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGhhbmRsZVNjcm9sbFNweSk7XHJcblx0Y29va2llQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ29va2llQkJveCk7XHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBlc2NhcGVLZXlDaGVjayk7XHJcblx0Y2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zaW5nUG9wdXApO1xyXG5cdHBvcHVwQm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2luZ1BvcHVwKTtcclxuXHRidXJnZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuTWVudSk7XHJcbn07XHJcblxyXG5jb25zdCBoYW5kbGVDdXJyZW50WWVhciA9ICgpID0+IHtcclxuXHRjb25zdCB5ZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xyXG5cdGZvb3RlclllYXIuaW5uZXJUZXh0ID0geWVhcjtcclxufTtcclxuXHJcbmNvbnN0IHNob3dFcnJvciA9IChpbnB1dCwgbXNnKSA9PiB7XHJcblx0Y29uc3QgZm9ybUJveCA9IGlucHV0LnBhcmVudEVsZW1lbnQ7XHJcblx0Y29uc3QgZXJyb3JNc2cgPSBmb3JtQm94LnF1ZXJ5U2VsZWN0b3IoJy5lcnJvci10ZXh0Jyk7XHJcblxyXG5cdGZvcm1Cb3guY2xhc3NMaXN0LmFkZCgnZXJyb3InKTtcclxuXHRlcnJvck1zZy50ZXh0Q29udGVudCA9IG1zZztcclxufTtcclxuXHJcbmNvbnN0IGNsZWFyRXJyb3IgPSBpbnB1dCA9PiB7XHJcblx0Y29uc3QgZm9ybUJveCA9IGlucHV0LnBhcmVudEVsZW1lbnQ7XHJcblx0Zm9ybUJveC5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvcicpO1xyXG59O1xyXG5cclxuY29uc3QgY2hlY2tGb3JtID0gaW5wdXQgPT4ge1xyXG5cdGlucHV0LmZvckVhY2goZWwgPT4ge1xyXG5cdFx0aWYgKGVsLnZhbHVlID09PSAnJykge1xyXG5cdFx0XHRzaG93RXJyb3IoZWwsICdVenVwZcWCbmlqIHBvbGUgKicpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y2xlYXJFcnJvcihlbCk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn07XHJcblxyXG5jb25zdCBjaGVja01haWwgPSBlbWFpbCA9PiB7XHJcblx0Y29uc3QgcmUgPVxyXG5cdFx0L14oKFtePD4oKVtcXF1cXFxcLiw7Olxcc0BcIl0rKFxcLltePD4oKVtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXF0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvO1xyXG5cclxuXHRpZiAocmUudGVzdChlbWFpbC52YWx1ZSkpIHtcclxuXHRcdGNsZWFyRXJyb3IoZW1haWwpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRzaG93RXJyb3IoZW1haWwsICdFLW1haWwgamVzdCBuaWVwb3ByYXdueScpO1xyXG5cdH1cclxufTtcclxuXHJcbmNvbnN0IGNsb3NlUG9wdXAgPSAoKSA9PiB7XHJcblx0cG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdy1wb3B1cCcpO1xyXG59O1xyXG5cclxuY29uc3QgY2hlY2tFcnJvcnMgPSAoKSA9PiB7XHJcblx0Y29uc3QgYWxsRm9ybUJveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbnRhY3RfX2Zvcm0tYm94Jyk7XHJcblx0bGV0IGVycm9yQ291bnQgPSAwO1xyXG5cclxuXHRhbGxGb3JtQm94ZXMuZm9yRWFjaChlbCA9PiB7XHJcblx0XHRpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdlcnJvcicpKSB7XHJcblx0XHRcdGVycm9yQ291bnQrKztcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0aWYgKGVycm9yQ291bnQgPT09IDApIHtcclxuXHRcdHBvcHVwLmNsYXNzTGlzdC5hZGQoJ3Nob3ctcG9wdXAnKTtcclxuXHRcdHNldFRpbWVvdXQoY2xvc2VQb3B1cCwgMjAwMCk7XHJcblx0fVxyXG59O1xyXG5cclxuLy8gYnVyZ2VyIGJ0blxyXG5cclxuY29uc3Qgb3Blbk1lbnUgPSAoKSA9PiB7XHJcblx0Y29uc3QgbmF2TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZiYXJfX2xpc3QnKTtcclxuXHRuYXZMaXN0LmNsYXNzTGlzdC50b2dnbGUoJ25hdmJhcl9fbGlzdC0tYWN0aXZlJyk7XHJcbn07XHJcblxyXG4vLyBjbG9zZSBtZW51XHJcblxyXG5jb25zdCBpdGVtY2xvc2VNZW51ID0gKCkgPT4ge1xyXG5cdGNvbnN0IG5hdkxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2YmFyX19saXN0Jyk7XHJcblx0bmF2TGlzdC5jbGFzc0xpc3QucmVtb3ZlKCduYXZiYXJfX2xpc3QtLWFjdGl2ZScpO1xyXG59O1xyXG5cclxuY29uc3QgY2xvc2VNZW51ID0gKCkgPT4ge1xyXG5cdGNvbnN0IG5hdkljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmF2YmFyX19pY29uJyk7XHJcblx0Y29uc3QgbmF2SXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2YmFyX19pdGVtJyk7XHJcblx0bmF2SXRlbXMuZm9yRWFjaChlbCA9PiB7XHJcblx0XHRlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGl0ZW1jbG9zZU1lbnUpO1xyXG5cdH0pO1xyXG5cclxuXHRuYXZJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaXRlbWNsb3NlTWVudSk7XHJcbn07XHJcblxyXG4vLyBzY3JvbGwgc3B5XHJcblxyXG5jb25zdCBoYW5kbGVTY3JvbGxTcHkgPSAoKSA9PiB7XHJcblx0aWYgKGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKCdtYWluLXBhZ2UnKSkge1xyXG5cdFx0Y29uc3Qgc2VjdGlvbnMgPSBbXTtcclxuXHJcblx0XHRzY3JvbGxTcHlTZWN0aW9ucy5mb3JFYWNoKHNlY3Rpb24gPT4ge1xyXG5cdFx0XHRpZiAoXHJcblx0XHRcdFx0d2luZG93LnNjcm9sbFkgPD1cclxuXHRcdFx0XHRzZWN0aW9uLm9mZnNldFRvcCArIHNlY3Rpb24ub2Zmc2V0SGVpZ2h0IC0gbmF2YmFyLm9mZnNldEhlaWdodCAtIDFcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0c2VjdGlvbnMucHVzaChzZWN0aW9uKTtcclxuXHJcblx0XHRcdFx0Y29uc3QgYWN0aXZlU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XHRcdFx0XHRgW2hyZWYqPVwiJHtzZWN0aW9uc1swXS5pZH1cIl1gXHJcblx0XHRcdFx0KTtcclxuXHJcblx0XHRcdFx0aWYgKGFjdGl2ZVNlY3Rpb24pIHtcclxuXHRcdFx0XHRcdG1lbnVJdGVtcy5mb3JFYWNoKGxpbmsgPT4gbGluay5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7XHJcblx0XHRcdFx0XHRhY3RpdmVTZWN0aW9uLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRtZW51SXRlbXMuZm9yRWFjaChsaW5rID0+IGxpbmsuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKHdpbmRvdy5pbm5lckhlaWdodCArIHdpbmRvdy5zY3JvbGxZID4gZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQpIHtcclxuXHRcdFx0XHRjb25zdCBsYXN0U2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZiYXItaXRlbTpsYXN0LW9mLXR5cGUnKTtcclxuXHJcblx0XHRcdFx0bWVudUl0ZW1zLmZvckVhY2goaXRlbSA9PiBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTtcclxuXHJcblx0XHRcdFx0bGFzdFNlY3Rpb24uY2xhc3NMaXN0LmFkZCgnLmFjdGl2ZScpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcbn07XHJcblxyXG4vLyB6b29tIGltZ1xyXG5cclxuYWxsSW1hZ2VzLmZvckVhY2goZWwgPT4ge1xyXG5cdGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0Y29uc3QgcG9wdXBJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtaW1nIGltZycpO1xyXG5cdFx0cG9wdXBCb3guc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcblx0XHRwb3B1cEltZy5zcmMgPSBlbC5nZXRBdHRyaWJ1dGUoJ3NyYycpO1xyXG5cdFx0cG9wdXBJbWcuYWx0ID0gZWwuZ2V0QXR0cmlidXRlKCdhbHQnKTtcclxuXHR9KTtcclxufSk7XHJcblxyXG4vLyBjbG9zZSBpbWdcclxuXHJcbmNvbnN0IGNsb3NpbmdQb3B1cCA9ICgpID0+IHtcclxuXHRwb3B1cEJveC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG59O1xyXG5cclxuY29uc3QgZXNjYXBlS2V5Q2hlY2sgPSBlID0+IHtcclxuXHRpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XHJcblx0XHRjbG9zaW5nUG9wdXAoKTtcclxuXHR9XHJcbn07XHJcblxyXG4vLyBjb29raWVzXHJcblxyXG5jb25zdCBzaG93Q29va2llID0gKCkgPT4ge1xyXG5cdGNvbnN0IGNvb2tpZUVhdGVuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Nvb2tpZScpO1xyXG5cclxuXHRpZiAoY29va2llRWF0ZW4pIHtcclxuXHRcdGNvb2tpZUJveC5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7XHJcblx0fVxyXG59O1xyXG5cclxuY29uc3QgaGFuZGxlQ29va2llQkJveCA9ICgpID0+IHtcclxuXHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY29va2llJywgJ3RydWUnKTtcclxuXHRjb29raWVCb3guY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xyXG59O1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIG1haW4pO1xyXG4iXX0=
